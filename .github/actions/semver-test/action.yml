name: semver-test
description: Tests the version outputs of semver-action
inputs:
  expected-version:
    description: The expected current version
    required: true
  actual-version:
    description: The actual current version
    required: true
  expected-next-version:
    description: The expected next version
    required: false
  actual-next-version:
    description: The actual next version
    required: false
  expected-next-snapshot-version:
    description: The expected next SNAPSHOT version
    required: false
  actual-next-snapshot-version:
    description: The actual next SNAPSHOT version
    required: false

runs:
  using: composite
  steps:
    - name: Compare Version
      run: |
        if [[ "${{ inputs.expected-version }}" != "${{ inputs.actual-version }}" ]]; then
          echo "::error::Expected: ${{ inputs.expected-version }}, Actual: ${{ inputs.actual-version }}"
          exit 1
        else
          echo "Expected: ${{ inputs.expected-version }}, Actual: ${{ inputs.actual-version }}"
          echo "Actual major: ${{ inputs.actual-version.major }}"
          echo "Actual minor: ${{ inputs.actual-version.minor }}"
          echo "Actual patch: ${{ inputs.actual-version.patch }}"
        fi
      shell: bash
    - name: Compare Next Version
      run: |
        if [[ "${{ inputs.expected-build-version }}" != "${{ inputs.actual-next-version }}" ]]; then
          echo "::error::Expected: ${{ inputs.expected-next-version }}, Actual: ${{ inputs.actual-next-version }}"
          exit 1
        else
          echo "Expected: ${{ inputs.expected-next-version }}, Actual: ${{ inputs.actual-next-version }}"
          echo "Actual major: ${{ inputs.actual-next-version.major }}"
          echo "Actual minor: ${{ inputs.actual-next-version.minor }}"
          echo "Actual patch: ${{ inputs.actual-next-version.patch }}"
        fi
      shell: bash
    - name: Compare Next SNAPSHOT Version
      run: |
        if [[ "${{ inputs.expected-next-snapshot-version }}" != "${{ inputs.actual-next-snapshot-version }}" ]]; then
          echo "::error::Expected: ${{ inputs.expected-next-snapshot-version }}, Actual: ${{ inputs.actual-next-snapshot-version }}"
          exit 1
        else
          echo "Expected: ${{ inputs.expected-next-snapshot-version }}, Actual: ${{ inputs.actual-next-snapshot-version.version }}"
          echo "Actual major: ${{ inputs.actual-next-snapshot-version.major }}"
          echo "Actual minor: ${{ inputs.actual-next-snapshot-version.minor }}"
          echo "Actual patch: ${{ inputs.actual-next-snapshot-version.patch }}"
        fi
      shell: bash
